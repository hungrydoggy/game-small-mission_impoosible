auto fsm = params[0].as<Fsm*>();  

auto self = fsm->owner();

int mov_dir = ((g_is_left_key_down == true)? -1 : 0) + ((g_is_right_key_down == true)? 1 : 0);
switch (mov_dir) {
  case -1: self->sendMessage("/player", "moveLeft" ); break;
  case  0: self->sendMessage("/player", "stopMove" ); break;
  case  1: self->sendMessage("/player", "moveRight"); break;
}
return null_var;
